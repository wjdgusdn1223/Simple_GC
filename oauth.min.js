function exceptionCheck(){return!!(document.getElementById("title").value&&$("#start").calendar("get date")&&$("#end").calendar("get date"))}function addSchedule(t){console.log(t);var e=$("#start").calendar("get date")+"",n=$("#end").calendar("get date")+"",a=e.split(" "),i=n.split(" ");a[1]=monthConvert(a[1]),i[1]=monthConvert(i[1]);var o=reminderCheck();fetch("https://www.googleapis.com/calendar/v3/calendars/primary/events?sendUpdates=all&key="+String.fromCharCode(65)+String.fromCharCode(73)+String.fromCharCode(122)+String.fromCharCode(97)+String.fromCharCode(83)+String.fromCharCode(121)+String.fromCharCode(68)+String.fromCharCode(115)+String.fromCharCode(121)+String.fromCharCode(65)+String.fromCharCode(121)+String.fromCharCode(120)+String.fromCharCode(52)+String.fromCharCode(122)+String.fromCharCode(69)+String.fromCharCode(85)+String.fromCharCode(115)+String.fromCharCode(69)+String.fromCharCode(114)+String.fromCharCode(119)+String.fromCharCode(112)+String.fromCharCode(95)+String.fromCharCode(95)+String.fromCharCode(72)+String.fromCharCode(78)+String.fromCharCode(53)+String.fromCharCode(121)+String.fromCharCode(85)+String.fromCharCode(110)+String.fromCharCode(109)+String.fromCharCode(109)+String.fromCharCode(99)+String.fromCharCode(101)+String.fromCharCode(107)+String.fromCharCode(117)+String.fromCharCode(77)+String.fromCharCode(106)+String.fromCharCode(50)+String.fromCharCode(56),{method:"POST",async:!0,headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},contentType:"json",body:JSON.stringify({start:{dateTime:a[3]+"-"+a[1]+"-"+a[2]+"T"+a[4]+"+09:00"},end:{dateTime:i[3]+"-"+i[1]+"-"+i[2]+"T"+i[4]+"+09:00"},colorId:"1",visibility:"default",reminders:o,description:document.getElementById("desc").value,summary:document.getElementById("title").value})}).then(function(e){if(console.log("Request success: ",e.status),200!=e.status)throw 401==e.status?"token expired":"Request / Response Error";window.close()}).catch(function(e){console.log("Request failure: ",e),"token expired"==e?chrome.identity.removeCachedAuthToken({token:t},function(){chrome.identity.getAuthToken({interactive:!0},function(e){addSchedule(e)})}):($("#loader").hide(),$("#eMsg2").is(":visible")||$("#eMsg2").transition("fade"))})}function reminderCheck(){for(var e=document.getElementsByName("reminder"),t=e[0],n=0;n<e.length;n++)e[n].checked&&(t=e[n]);switch(t.id){case"none":t={useDefault:!0};break;case"popup":t={useDefault:!1,overrides:[{method:"popup",minutes:document.getElementById("minute").value?document.getElementById("minute").value:"0"}]};break;case"email":t={useDefault:!1,overrides:[{method:"email",minutes:document.getElementById("minute").value?document.getElementById("minute").value:"0"}]};break;case"both":t={useDefault:!1,overrides:[{method:"popup",minutes:document.getElementById("minute").value?document.getElementById("minute").value:"0"},{method:"email",minutes:document.getElementById("minute").value?document.getElementById("minute").value:"0"}]}}return t}function monthConvert(e){switch(e){case"Jan":e="1";break;case"Feb":e="2";break;case"Mar":e="3";break;case"Apr":e="4";break;case"May":e="5";break;case"Jun":e="6";break;case"Jul":e="7";break;case"Aug":e="8";break;case"Sep":e="9";break;case"Oct":e="10";break;case"Nov":e="11";break;case"Dec":e="12"}return e}function popupResize(){$("html").height()==$("#container").height()&&$("html").width()==$("#container").width()||($("html").height($("#container").height()),$("html").width($("#container").width()))}window.onload=function(){document.getElementById("title").focus(),$("#loader").hide(),document.getElementById("Cancel").addEventListener("click",function(){window.close()}),document.querySelector("#complete_btn").addEventListener("click",function(){$("#loader").show(),exceptionCheck()?chrome.identity.getAuthToken({interactive:!0},function(e){addSchedule(e)}):($("#loader").hide(),$("#eMsg").is(":visible")||$("#eMsg").transition("fade"))}),$("#start").calendar({type:"datetime",ampm:!1,monthFirst:!1}),$("#end").calendar({type:"datetime",ampm:!1,monthFirst:!1}),$("#close").on("click",function(){$(this).closest("#eMsg").transition("fade")}),$("#close2").on("click",function(){$(this).closest("#eMsg2").transition("fade")}),setInterval(popupResize,250)};